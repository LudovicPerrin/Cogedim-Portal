{% assign contactus_url = sitemarkers['Contact Us'].url %}
{% assign connexion_url = sitemarkers['Connexion'].url %}
{% assign contract_url = sitemarkers['Contract'].url %}
{% assign messages_url = sitemarkers['Messages'].url %}
{% assign home_url = sitemarkers['Home'].url %}

<footer class="region wrapper-main-footer region-footer">
  <div class="container">
    <div id="block-footer-site-branding" class="block block-system block-system-branding-block">
      <div class="footer-logo hidden-xs hidden-sm">
        <div class="logo">
          <h1 class="site-name">
            <a href="{{home_url}}" title="Accueil" rel="home" class="site-logo"></a>
          </h1>
        </div>
      </div>
    </div>
    <div id="block-footer-cta-button-anonymous" class="footer-right">
      <div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item">
        <div class="consult">
          <a class="btn btn-primary" href="{{contactus_url}}">Contactez-nous</a>
        </div>
      </div>    
    </div>
    <div id="block-cogedim-common-footer-menu" class="footer-bottom">
      <div class="trademark">Cogedim est une marque du groupe Altarea Cogedim</div>
      <nav class="menu-footer">
        <ul class="menu">
          <li class="menu-item">
            <a href="https://www.mon-cogedim.com/conditions-generales-dutilisation-des-services" data-drupal-link-system-path="node/25">CGU</a>
          </li>
          <li class="menu-item">
            <a href="https://www.mon-cogedim.com/mentions-legales" data-drupal-link-system-path="node/26">Mentions légales</a>
          </li>
          <li class="menu-item">
            <a href="http://www.cogedim-logement.com/" class="0" target="_blank">
              Cogedim
              <span class="0">
                <span class="element-invisible"> </span>
              </span>
            </a>
          </li>
        </ul>
      </nav>
      <nav class="menu-external">
        <div class="title">Nos autres sites :</div>
        <ul class="menu">
          <li class="menu-item">
            <a href="http://www.cogedim-partenaire.com/" class="0" target="_blank">    Espace Partenaires
              <span class="0">
                <span class="element-invisible"> </span>
              </span>
            </a>
          </li>
          <li class="menu-item">
            <a href="http://www.cogedim-club.com/" class="0" target="_blank">
              Cogedim Club ®
              <span class="0">
                <span class="element-invisible"> </span>
              </span>
            </a>
          </li>
          <li class="menu-item">
            <a href="http://www.altareacogedim.com/" class="0" target="_blank"> 
              Groupe Altarea Cogedim
              <span class="0">
                <span class="element-invisible"> </span>
              </span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</footer>

<script type="text/javascript" src="/cgd_slick.min.js"></script>
<script type="text/javascript">
  
  $(window).ready(function(){    

    $('.menu-item a').removeClass('.is-active');
    $('.contract-multi-selection').css('display', 'block');

    if(window.location.pathname == '{{home_url}}')
      $('.menu-item-accueil a').addClass('is-active');
    if(window.location.pathname == '{{contactus_url}}' || window.location.pathname == '{{messages_url}}'){

      //Add classes to add good styles
      if(window.location.pathname == '{{contactus_url}}')
        $('.menu-item-contact a').addClass('is-active');

      $('#description').addClass('form-textarea resize-vertical'); 
      $('#subject').addClass('form-control form-text chosen-disable');
      $('#InsertButton').addClass('button js-form-submit form-submit');

      //Add place holder in the correct fields
      $('#subject').attr('placeholder', 'Écrivez un sujet');
      $('#description').attr('placeholder', 'Saisissez votre message…');
      
      //Change settings of radio buttons
      $('#acq_direction_0').removeAttr('checked');
      $('#acq_direction_1').prop("checked", true);

      //Hide some fields
      if(window.location.pathname == '{{messages_url}}')
        $('#subject').parents('tr:first').css('display', 'none');

      $('#acq_webuser_name').parents('tr:first').css('display', 'none');
      $('#acq_direction_label').parents('tr:first').css('display', 'none');
      $('#acq_messageorigine_name').parents('tr:first').css('display', 'none');
      $('#acq_messageprecedent_name').parents('tr:first').css('display', 'none');
      $('td.form-control-cell.datetime').parents('tr:first').css('display', 'none');
      $('#acq_messageprecedent_name').parents('tr:first').next().css('display', 'none');
    }
    if(window.location.pathname == '{{connexion_url}}')
      $('.menu-item-connexion, #block-userlogin').remove();
    if(window.location.pathname == '/SignIn'){

      //Remove all don't wanted HTML Elements
      $('#content').children().first().remove();
      $('#content').children().children('.row').children().last().remove();
      $('#RememberMe').parents('.form-group').remove();
      $('#Username').parent().prev().remove();
      $('#Password').parent().prev().remove();
      $('#content fieldset legend').remove();

      //Create some HTML elements
      var html =  '<div class="page-header-wrapper"><div class="container"><div id="block-pagetitle" class="block block-core block-page-title-block block-page-title"><h1 class="page-title">CONNEXION</h1></div></div></div>';
      $('#content fieldset').prepend(html);

      //Add classes to add styles
      $('#Username').addClass("form-control form-text required");
      $('#Password').addClass("form-control form-pass form-text required");
      $('#content').find('.col-md-6').attr('class', 'col-md-12');
      $('#content').find('.col-sm-8').attr('class', 'col-sm-12');
      $('#submit-signin-local')[0].innerText = 'connexion';
      $('#submit-signin-local').next().attr('class', '');

      //Add style
      $('#submit-signin-local').parent().css('text-align', 'center');
      $('#Username').parents('.form-group').css('margin-bottom', '25px');
      $('#Password').parents('.form-group').css('margin-bottom', '48px');

      //Add place holder in the correct fields
      $('#Password').attr('placeholder', 'Mot de passe');
      $('#Username').attr('placeholder', 'Votre identifiant');      
    }
    if(window.location.pathname == '/Account/Login/ForgotPassword'){

      //Remove all don't wanted HTML Elements
      $('#Email').parents('.form-group').find('p, label').remove();
      $('#content fieldset legend').remove();

      //Create some HTML elements
      var html =  '<div class="page-header-wrapper"><div class="container"><div id="block-pagetitle" class="block block-core block-page-title-block block-page-title"><h1 class="page-title">Mot de passe oublié?</h1></div></div></div>';
      $('#content fieldset').prepend(html);
      html = '<div class="container"><div class="text-content"><p>Merci d\'entrer votre identifiant pour recevoir un mail qui vous permettra de réinitialiser votre mot de passe.</p></div></div>';
      $(html).insertAfter('#content .page-header-wrapper');
      $('<div class="preface-bottom"></div>').insertAfter('#content');

      //Add classes to add styles
      $('#Email').addClass('form-control form-text required');
      $('#Email').parents('.form-group').css('margin-top', '76px');

      //Add style
      $('#content').find('.col-sm-offset-2.col-sm-10').attr('class', 'col-sm-12');
      $('#content').find('.col-sm-10').attr('class', 'col-sm-12');

      //Add place holder in the correct fields
      $('#Email').attr('placeholder', 'Votre identifiant');

      //Add other HTML elements next to the form
      $('<div class="wrapper-home-video"><div class="container"><div id="block-homepage-video" class="block block-block-content block-block-content82a11756-728a-4171-8d00-e26a166b909e"><div class="field field--name-field-node field--type-entity-reference field--label-hidden field__items"><div class="field__item"><div class="block-title"><span class="field field--name-title field--type-string field--label-hidden">Découvrez l\'Espace Client COGEDIM</span></div><div class="video-player"><figure class="youtube-container"><iframe src="https://www.youtube.com/embed/hPRi1jnjqIA?rel=0&amp;enablejsapi=1&amp;origin=https%3A//www.mon-cogedim.com&amp;wmode=opaque" id="youtube-video-88" class="youtube-field-player" title="Embedded video for Découvrez l\'Espace Client COGEDIM" allowfullscreen="" <a href="https://www.youtube.com/embed/hPRi1jnjqIA?rel=0&amp;enablejsapi=1&amp;origin=https%3A//www.mon-cogedim.com&amp;wmode=opaque">Embedded video for Découvrez l&#039;Espace Client COGEDIM</a></iframe></figure><div class="overlay"><span class="play-button"></span></div></div></div></div></div></div></div><div class="wrapper-home-articles"><div class="container"><div class="views-element-container block block-views block-views-blockautopromos-block-autopromos block-home-articles" id="block-views-block-autopromos-block-autopromos"><div class="view view-autopromos view-id-autopromos view-display-id-block_autopromos js-view-dom-id-0a4ff5e71ccba00b20956f281f3e61491f450bcca1448effb5c3081a735e7f76"><div class="view-header"><article role="article" about="/cogedim-facilite-votre-achat-dans-le-neuf" class="node node--type-custom-page node--view-mode-teaser" lang="en"><div class="block-title"><span class="field field--name-title field--type-string field--label-hidden">Cogedim facilite votre achat dans le neuf</span></div><div class="content"><div class="description field field--name-body field--type-text-with-summary field--label-hidden field__item"><p>Chez Cogedim, vous êtes accompagné personnellement, de A à Z. Aide pour le financement, personnalisation de votre logement, suivi des travaux…votre interlocuteur attitré répond à toutes vos questions. Mieux informé et mieux guidé, vous achetez avec sérénité.</p></div></div></article></div><div class="view-content"><div class="articles-list"><div class="articles-content"><div class="views-row article"><article role="article" about="/votre-responsable-relation-client-vous-accompagne" class="node node--type-autopromo node--view-mode-teaser clearfix"><header></header><div class="image"><a href="  /votre-responsable-relation-client-un-interlocuteur-attentif-a-votre-ecoute"><div class="field field--name-field-image field--type-image field--label-hidden field__item">  <img src="/cgd_picture_test.jpg" alt="" typeof="foaf:Image" class="image-style-_05x168-sc"></div></a></div><div class="category"><a href="  /votre-responsable-relation-client-un-interlocuteur-attentif-a-votre-ecoute"><div class="field field--name-field-kicker field--type-string field--label-hidden field__item">A votre écoute</div></a></div><div class="title"><a href="  /votre-responsable-relation-client-un-interlocuteur-attentif-a-votre-ecoute"><span class="field field--name-title field--type-string field--label-hidden">Votre Responsable Relation Client vous accompagne</span></a></div></article></div><div class="views-row article"><article role="article" about="/de-la-reservation-a-la-remise-de-vos-cles" class="node node--type-autopromo node--view-mode-teaser clearfix"><header></header><div class="image"><a href="  /les-grandes-etapes-de-votre-achat-chez-cogedim"><div class="field field--name-field-image field--type-image field--label-hidden field__item">  <img src="/cgd_picture_test.jpg" alt="" typeof="foaf:Image" class="image-style-_05x168-sc"></div></a></div><div class="category"><a href="  /"><div class="field field--name-field-kicker field--type-string field--label-hidden field__item">Les étapes clés</div></a></div><div class="title"><a href="  /les-grandes-etapes-de-votre-achat-chez-cogedim"><span class="field field--name-title field--type-string field--label-hidden">De la réservation à la remise de vos clés</span></a></div></article></div><div class="views-row article"><article role="article" about="/les-avantages-dacheter-chez-cogedim-0" class="node node--type-autopromo node--promoted node--view-mode-teaser clearfix"><header></header><div class="image"><a href="  /les-avantages-dacheter-chez-cogedim"><div class="field field--name-field-image field--type-image field--label-hidden field__item">  <img src="/cgd_picture_test.jpg" alt="" typeof="foaf:Image" class="image-style-_05x168-sc"></div></a></div><div class="category"><a href="  /les-avantages-dacheter-chez-cogedim"><div class="field field--name-field-kicker field--type-string field--label-hidden field__item">Les + COGEDIM</div></a></div><div class="title"><a href="  /les-avantages-dacheter-chez-cogedim"><span class="field field--name-title field--type-string field--label-hidden">Les avantages d\'acheter chez Cogedim </span></a></div></article></div></div></div></div></div></div></div></div><div class="region region-bottom"><div id="block-prehomebanner" class="block block-ce-footer block-ce-prehome-banner"><div class="wrapper-home-banner"><div class="container"><div class="block-home-banner"><div class="block-title">Découvrez tous nos programmes près de chez vous</div><div class="block-title-mobile">Découvrez tous nos programmes près de chez vous</div><div class="content"><div class="banner-link"><a href="http://www.cogedim-logement.com/" class="btn btn-white 0" target="_blank">COGEDIM.COM<span class="0"><span class="element-invisible"> </span></span></a></div></div></div></div></div></div></div>').insertAfter('#content-container');
    }
    if(window.location.pathname == '/profile/'){

      //Remove all don't wanted HTML Elements
      $('#content_form').find('.row .col-md-8 .xrm-editable-html').remove();
      $('#content_form').find('.row .weblinks-depth-1').remove();
      $('#content_form').find('.page-heading').remove();
      $('.xrm-editable-adx_weblinkset').remove();

      //Create some HTML elements
      $('<div class="item-label">PRÉNOM</div>').insertBefore('#firstname');
      $('<div class="item-label">NOM</div>').insertBefore('#lastname');
      $('<div class="item-label">EMAIL</div>').insertBefore('#emailaddress1');
      $('<div class="item-label">TELEPHONE</div>').insertBefore('#telephone1');
      $('<div class="item-label">ENTREPRISE</div>').insertBefore('#adx_organizationname');
      $('<div class="item-label">POSTE</div>').insertBefore('#jobtitle');
      $('<div class="item-label">PSEUDO</div>').insertBefore('#nickname');
      $('<div class="item-label">SITE WEB</div>').insertBefore('#websiteurl');
      $('<div class="item-label">DESCRIPTION</div>').insertBefore('#adx_publicprofilecopy');

      var html =  '<div class="page-header-wrapper"><div class="container"><div id="block-pagetitle" class="block block-core block-page-title-block block-page-title"><h1 class="page-title">Mon Profil</h1></div></div></div>';
      $('#content_form').prepend(html);

      //Add classes to add styles
      $('#firstname, #lastname, #emailaddress1, #telephone1, #adx_organizationname, #jobtitle, #nickname, #websiteurl, #adx_publicprofilecopy').addClass('form-control form-text');


      //Add style

    }
    if(window.location.pathname.includes('Account/Manage/ChangePassword')){
      
    }

    $(window).scroll(function(){

      if($(document).scrollTop() > 0)
        $('header').addClass('header-scrolled');
      else
        $('header').removeClass('header-scrolled');
    });

    $('[data-toggle="popover"]').popover();  

    $('.menu-header-toggle').click(function(){

      $('.menu-header').hasClass('expanded') ?
        $('.menu-header').removeClass('expanded') :
        $('.menu-header').addClass('expanded');
    });

    $('.menu-bar-toggle').click(function(){

      $('.main-header-wrapper').hasClass('menu-expanded') ?
        $('.main-header-wrapper').removeClass('menu-expanded') :
        $('.main-header-wrapper').addClass('menu-expanded');
    });

    $('.menu-bar-inner .menu-user-mobile a').click(function(){

      if($(this).hasClass('expanded')){
        $(this).removeClass('expanded');
        $(this).next().addClass('hidden');
      }
      else{
        $(this).addClass('expanded');
        $(this).next().removeClass('hidden');       
      }
    });

    $('h3.lot-title').click(function(){

      $(this).parent().hasClass('expanded') ?
        $(this).parent().removeClass('expanded') :
        $(this).parent().addClass('expanded');
    });

    $('.contract-item').click(function(){

      $('.contract-item').removeClass('selected-contract')
      $(this).addClass('selected-contract');

      //Récupération des données du contrat sélectionné
      var rrc = $(this).attr('rrc');
      var trancheName = $(this).attr('trancheName');
      var lots = $(this).attr('lots').split('|');
      var contractName = $(this).attr('contractName');
      var contractId = $(this).attr('contractId');
      var program = new Object();
      program.name = $(this).attr('programName');
      program.address1 = $(this).attr('address1');
      program.address2 = $(this).attr('address2');

      //Mise à jour des données de la page
      $('.title .field--name-name').html(program.name);
      $('.title .address-1').html(program.address1);
      $('.title .address-3').html(program.address2);
      $('.info .field__item').remove();
      setCookie('contractId', contractId, 7);

      for (var i = 0; i < lots.length - 1 ; i++) {
        $('.lot-items').append('<li class="field__item"><a href="{{contract_url}}"><article role="article"><div class="content">' + lots[i] + '</div></article></a></li>')
      }
    });

    $('.block-messages-content .message-row .info .response .expand').click(function(){

      var message = new Object();
      var subject = $(this).parents('.node--view-mode-message').next().children().first().attr('subject');
      var iframe = $(this).parents('.node--view-mode-message').next().find('iframe');

      message.origine_id = $(this).parents('.node--view-mode-message').next().children().first().attr('id');
      message.origine_name = subject;
      message.precedent_id = $(this).parents('.node--view-mode-message').next().find('.item').last().attr('id');
      message.precedent_name = $(this).parents('.node--view-mode-message').next().find('.item').last().attr('subject');

      //Create the good URL to let the Entity Form add the data at the good place
      var newUrl = "/cgd_messages_iframe/?" + 
        "subject=" + subject + 
        "&origine_id=" + message.origine_id + 
        "&origine_name=" + message.origine_name +
        "&precedent_id=" + message.precedent_id + 
        "&precedent_name=" + message.precedent_name;

      if(iframe.attr('src') == "")
        iframe.attr('src', newUrl);

      $(this).parents('.message-row').hasClass('expanded') ?
        $(this).parents('.message-row').removeClass('expanded') :
        $(this).parents('.message-row').addClass('expanded');  
    });

    $('.contrat-slider-panel').slick({
      prevArrow: '<a href="#" class="slick-prev">prev</a>',
      nextArrow: '<a href="#" class="slick-next">next</a>',
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 5000,
      cssEase: 'ease',
      arrows: true,
      useTransform: true,
      infinite: true,
      variableWidth: false
    });

    $('.contract-slider').slick({
      slidesToShow: 3,
      slidesToScroll: 3,
      infinite: true,
      responsive: [
        {
          breakpoint: 991,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 2,
            infinite: true
          }
        }
      ]
    });
  });

</script>